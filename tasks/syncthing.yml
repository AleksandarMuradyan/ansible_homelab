---
- name: Create syncthing container
  community.docker.docker_container:
    name: syncthing
    image: lscr.io/linuxserver/syncthing:latest
    pull: true
    state: started
    restart_policy: unless-stopped
    ports:
      - "22000:22000/tcp"
      - "22000:22000/udp"
      - "21027:21027/udp"
    volumes:
      - "{{ docker_dir }}/syncthing/config:/config"
      - "{{ docker_dir }}/syncthing/data:/data1"
    networks:
      - name: homelab
    env:
      PUID: "{{ {{ username }}_uid }}"
      PGID: "{{ {{ username }}_gid }}"
      TZ: "{{ timezone }}"
